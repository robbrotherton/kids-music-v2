<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kids Music Toy</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŽµ</text></svg>">
    <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="wave-selector.css">
</head>

<body>
    <div id="app">
        <!-- Tabs at the top -->
        <nav id="tabs">
            <button class="tab active" data-tab="drums">Drums</button>
            <button class="tab" data-tab="bass">Bass</button>
            <button class="tab" data-tab="rhythm">Rhythm</button>
            <button class="tab" data-tab="lead">Lead</button>
        </nav>

        <!-- Controls panel -->
        <div id="controls-panel">
            <div class="controls-section full-row">
                <!-- <h3>Bass Controls</h3> -->
                <!-- Wave selector moved to Effects row -->
                <!-- Volume, Filter, Resonance moved into Effects row as Tone group -->
                <!-- ADSR moved into Effects row as a compact stacked control -->

                <!-- Effects (moved under Bass Controls) -->
                <!-- <h3>Effects</h3> -->
                <div class="effects-row">
                    <div class="effect-group compact">
                        <div class="effect-title">Wave</div>
                        <div class="knob-row">
                            <div class="knob-block">
                                <wave-selector id="bass-wave-type" value="sawtooth"></wave-selector>
                            </div>
                        </div>
                    </div>

                    <div class="effect-group compact adsr-group">
                        <div class="knob-row">
                            <div class="knob-block">
                                <div class="adsr-column">
                                    <div class="adsr-item"><span class="adsr-label">A</span><input type="range" id="bass-attack" min="0.001" max="1" step="0.001" value="0.01"></div>
                                    <div class="adsr-item"><span class="adsr-label">D</span><input type="range" id="bass-decay" min="0.001" max="1" step="0.001" value="0.1"></div>
                                    <div class="adsr-item"><span class="adsr-label">S</span><input type="range" id="bass-sustain" min="0" max="1" step="0.01" value="0.8"></div>
                                    <div class="adsr-item"><span class="adsr-label">R</span><input type="range" id="bass-release" min="0.001" max="2" step="0.001" value="0.1"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Mod Shape: simplified toggle (sine <-> square). Moved to end of row by placement later. -->

                    <div class="tone-cluster effects-cluster">
                        <div class="effect-group">
                            <div class="effect-title">Vol</div>
                            <div class="knob-row">
                                    <div class="knob-block">
                                        <div class="knob" id="bass-volume" data-min="-60" data-max="0" data-step="1" data-value="0"></div>
                                        <div class="sub">&nbsp;</div>
                                    </div>
                                </div>
                        </div>

                        <div class="effect-group">
                            <div class="effect-title">Tone</div>
                            <div class="knob-row">
                                <div class="knob-block">
                                    <div class="knob" id="bass-filter-freq" data-min="100" data-max="5000" data-step="10" data-value="2000"></div>
                                    <div class="sub">Filter</div>
                                </div>
                                <div class="knob-block">
                                    <div class="knob" id="bass-filter-q" data-min="0.1" data-max="10" data-step="0.1" data-value="1"></div>
                                    <div class="sub">Res</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="effects-cluster">
                        <div class="effect-group">
                            <div class="effect-title">Vibrato</div>
                            <div class="knob-row">
                                <div class="knob-block">
                                    <div class="knob" id="bass-vibrato-depth" data-min="0" data-max="1" data-step="0.01" data-value="0"></div>
                                    <div class="sub">Depth</div>
                                </div>
                                <div class="knob-block">
                                    <div class="knob" id="bass-vibrato-rate" data-min="0.1" data-max="20" data-step="0.1" data-value="5"></div>
                                    <div class="sub">Rate</div>
                                </div>
                            </div>
                        </div>

                        <div class="effect-group">
                            <div class="effect-title">Tremolo</div>
                            <div class="knob-row">
                                <div class="knob-block">
                                    <div class="knob" id="bass-tremolo-depth" data-min="0" data-max="1" data-step="0.01" data-value="0"></div>
                                    <div class="sub">Depth</div>
                                </div>
                                <div class="knob-block">
                                    <div class="knob" id="bass-tremolo-rate" data-min="0.1" data-max="20" data-step="0.1" data-value="5"></div>
                                    <div class="sub">Rate</div>
                                </div>
                            </div>
                        </div>

                        <div class="effect-group">
                            <div class="effect-title">Wah</div>
                            <div class="knob-row">
                                <div class="knob-block">
                                    <div class="knob" id="bass-wah-depth" data-min="0" data-max="1" data-step="0.01" data-value="0"></div>
                                    <div class="sub">Depth</div>
                                </div>
                                <div class="knob-block">
                                    <div class="knob" id="bass-wah-rate" data-min="0.1" data-max="20" data-step="0.1" data-value="5"></div>
                                    <div class="sub">Rate</div>
                                </div>
                            </div>
                        </div>

                        <div class="effect-group compact">
                            <div class="knob-row">
                                <div class="knob-block">
                                    <div class="mod-toggle">
                                        <img src="icons/sine-wave.svg" alt="sine" class="mod-icon top">
                                        <label class="switch-vertical">
                                            <input type="checkbox" id="global-mod-shape" aria-label="Modulation shape: square when checked, sine when unchecked">
                                            <span class="slider-vertical"></span>
                                        </label>
                                        <img src="icons/square-wave.svg" alt="square" class="mod-icon bottom">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="controls-section full-row">
                <h3>Global Effects</h3>
                <div class="effects-row">
                    <div class="effect-group">
                        <div class="effect-title">Distortion</div>
                        <div class="knob-row">
                            <div class="knob-block">
                                <div class="knob" id="global-distortion" data-min="0" data-max="1" data-step="0.01" data-value="0"></div>
                                <div class="sub">&nbsp;</div>
                            </div>
                        </div>
                    </div>

                    <div class="effect-group">
                        <div class="effect-title">Delay</div>
                        <div class="knob-row">
                            <div class="knob-block">
                                <div class="knob" id="global-delay-time" data-min="0.01" data-max="1" data-step="0.01" data-value="0.3"></div>
                                <div class="sub">Time</div>
                            </div>
                            <div class="knob-block">
                                <div class="knob" id="global-delay-feedback" data-min="0" data-max="0.9" data-step="0.01" data-value="0.3"></div>
                                <div class="sub">Feedback</div>
                            </div>
                            <div class="knob-block">
                                <div class="knob" id="global-delay-wet" data-min="0" data-max="1" data-step="0.01" data-value="0"></div>
                                <div class="sub">Wet</div>
                            </div>
                        </div>
                    </div>

                    <div class="effect-group">
                        <div class="effect-title">Reverb</div>
                        <div class="knob-row">
                            <div class="knob-block">
                                <div class="knob" id="global-reverb-decay" data-min="0.1" data-max="10" data-step="0.1" data-value="2.5"></div>
                                <div class="sub">Decay</div>
                            </div>
                            <div class="knob-block">
                                <div class="knob" id="global-reverb-wet" data-min="0" data-max="1" data-step="0.01" data-value="0.3"></div>
                                <div class="sub">Wet</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main content area - shows pads, keyboard, etc. based on active tab -->
        <div id="content-area">
            <div id="drums" class="tab-content active">
                <div id="drum-pads">
                    <!-- Drum pads will be generated here -->
                </div>
            </div>
            <div id="bass" class="tab-content">
                <div id="bass-keyboard">
                    <!-- Bass keyboard will be generated here -->
                </div>
            </div>
            <div id="rhythm" class="tab-content">
                <!-- Rhythm content -->
            </div>
            <div id="lead" class="tab-content">
                <!-- Lead content -->
            </div>
        </div>

        <!-- Sequencer area - shows grids and transport controls -->
        <div id="sequencer-area">
            <div id="drum-grid" class="sequencer-grid">
                <!-- Drum sequencer grid will be generated here -->
            </div>
            <div id="bass-grid" class="sequencer-grid">
                <!-- Bass sequencer grid will be generated here -->
            </div>
            <div id="transport">
                <div id="transport-controls">
                    <button id="play-pause">Play</button>
                    <span id="bpm-display">BPM: 120</span>
                    <input type="range" id="bpm-slider" min="60" max="120" value="120">
                    <div id="bar-selector">
                        <button class="bar-btn active" data-bars="1">1</button>
                        <button class="bar-btn" data-bars="2">2</button>
                        <button class="bar-btn" data-bars="4">4</button>
                    </div>
                    <button id="clear-sequencer">Clear</button>
                </div>
            </div>
        </div>
    </div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tone/15.3.5/Tone.js"></script>
<script src="audio.js"></script>
<script src="transport.js"></script>
<script src="pianoKeyboard.js"></script>
<script src="drums.js"></script>
<script src="bass.js"></script>
<script src="ui.js"></script>
<script src="knob.js"></script>
<script src="wave-selector.js"></script>
<script src="controls.js"></script>
<script src="main.js"></script>

</html>